---
import { siteConfig } from "../config";

const hasProjects = siteConfig.projects && siteConfig.projects.length > 0;
const hasExperience = siteConfig.experience && siteConfig.experience.length > 0;
const hasEducation = siteConfig.education && siteConfig.education.length > 0;
---

<header
  id="header"
  class="fixed top-0 left-0 right-0 z-50 transition-all duration-500"
>
  <nav class="max-w-6xl mx-auto px-6 sm:px-8 py-4 flex items-center justify-between">
    <a href="#hero" class="text-lg font-semibold tracking-tight text-black font-mono">
      {siteConfig.name.split(" ")[0]}<span class="text-black/30">.</span>
    </a>

    <!-- Desktop nav -->
    <ul class="hidden md:flex items-center gap-8">
      <li>
        <a href="#about" class="text-sm text-black/40 hover:text-black transition-colors font-medium">About</a>
      </li>
      {hasExperience && (
        <li>
          <a href="#experience" class="text-sm text-black/40 hover:text-black transition-colors font-medium">Experience</a>
        </li>
      )}
      {hasEducation && (
        <li>
          <a href="#education" class="text-sm text-black/40 hover:text-black transition-colors font-medium">Education</a>
        </li>
      )}
      {hasProjects && (
        <li>
          <a href="#projects" class="text-sm text-black/40 hover:text-black transition-colors font-medium">Projects</a>
        </li>
      )}
    </ul>

    <!-- Mobile menu button -->
    <button
      id="mobile-menu-btn"
      class="md:hidden flex flex-col gap-1.5 p-2 -mr-2"
      aria-label="Toggle menu"
    >
      <span class="menu-line block w-6 h-0.5 bg-black/60 transition-all duration-300 origin-center"></span>
      <span class="menu-line block w-6 h-0.5 bg-black/60 transition-all duration-300"></span>
      <span class="menu-line block w-4 h-0.5 bg-black/60 transition-all duration-300 origin-center"></span>
    </button>
  </nav>

  <!-- Mobile menu -->
  <div
    id="mobile-menu"
    class="md:hidden overflow-hidden transition-all duration-300 max-h-0 opacity-0"
  >
    <div class="px-6 pb-6 pt-2 flex flex-col gap-4">
      <a href="#about" class="mobile-nav-link text-black/40 hover:text-black transition-colors font-medium py-2">About</a>
      {hasExperience && (
        <a href="#experience" class="mobile-nav-link text-black/40 hover:text-black transition-colors font-medium py-2">Experience</a>
      )}
      {hasEducation && (
        <a href="#education" class="mobile-nav-link text-black/40 hover:text-black transition-colors font-medium py-2">Education</a>
      )}
      {hasProjects && (
        <a href="#projects" class="mobile-nav-link text-black/40 hover:text-black transition-colors font-medium py-2">Projects</a>
      )}
    </div>
  </div>
</header>

<script>
  const header = document.getElementById("header");
  const menuBtn = document.getElementById("mobile-menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");
  const menuLines = menuBtn?.querySelectorAll(".menu-line");
  let menuOpen = false;

  window.addEventListener("scroll", () => {
    if (window.scrollY > 20) {
      header?.classList.add("bg-white/80", "backdrop-blur-xl", "border-b", "border-black/[0.06]");
    } else {
      header?.classList.remove("bg-white/80", "backdrop-blur-xl", "border-b", "border-black/[0.06]");
    }
  });

  menuBtn?.addEventListener("click", () => {
    menuOpen = !menuOpen;
    if (menuOpen) {
      mobileMenu?.classList.remove("max-h-0", "opacity-0");
      mobileMenu?.classList.add("max-h-80", "opacity-100");
      if (menuLines && menuLines.length >= 3) {
        menuLines[0].classList.add("rotate-45", "translate-y-2");
        menuLines[1].classList.add("opacity-0");
        menuLines[2].classList.add("-rotate-45", "-translate-y-2", "w-6");
      }
    } else {
      mobileMenu?.classList.add("max-h-0", "opacity-0");
      mobileMenu?.classList.remove("max-h-80", "opacity-100");
      if (menuLines && menuLines.length >= 3) {
        menuLines[0].classList.remove("rotate-45", "translate-y-2");
        menuLines[1].classList.remove("opacity-0");
        menuLines[2].classList.remove("-rotate-45", "-translate-y-2", "w-6");
      }
    }
  });

  document.querySelectorAll(".mobile-nav-link").forEach((link) => {
    link.addEventListener("click", () => {
      menuOpen = false;
      mobileMenu?.classList.add("max-h-0", "opacity-0");
      mobileMenu?.classList.remove("max-h-80", "opacity-100");
      if (menuLines && menuLines.length >= 3) {
        menuLines[0].classList.remove("rotate-45", "translate-y-2");
        menuLines[1].classList.remove("opacity-0");
        menuLines[2].classList.remove("-rotate-45", "-translate-y-2", "w-6");
      }
    });
  });
</script>
